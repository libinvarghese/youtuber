<html>
  <head>
    <title>Share App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  </head>
  <body >
  </body>
  <script>

    var getUrlParameter = function getUrlParameter(sParam) {
      var sPageURL = decodeURIComponent(window.location.search.substring(1));
      var sURLVariables = sPageURL.split('&');
      var sParameterName;
      var i;

      for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
          return sParameterName[1] === undefined ? true : sParameterName[1];
        }
      }
    };


    var handleMobileDetected = function handleMobileDetected( storeLink ) {
      console.log( 'handleMobileDetected: ' , storeLink );
      //window.location.href = 'market://details?id=com.communelabs.clchurch.rsag';
      //window.location.href = "https://play.google.com/store/apps/details?id=com.communelabs.clchurch.rsag";
      //window.location.href = "https://itunes.apple.com/us/app/rsag-church-bangalore/id1163164243?mt=8";
      window.location.href = storeLink;
    }


    $(document).ready(function() {
      var uagentString = navigator.userAgent.toLowerCase();
      var indexAndroid = uagentString.indexOf( 'android' );
      var androidLink = getUrlParameter( 'android' );
      console.log( 'androidLink: ' , androidLink );
      console.log( 'uagentString' , uagentString );
      console.log( 'indexAndroid: ' , indexAndroid );

      if( 0 <= indexAndroid ) {
        handleMobileDetected( androidLink );
        return;
      }

      var iOSLink = getUrlParameter( 'ios' );
      var indexIPhone = uagentString.indexOf( 'iphone' );
      var indexIPad = uagentString.indexOf( 'ipad' );
      var indexIPod = uagentString.indexOf( 'ipod' );

      console.log( 'iOSLink: ' , iOSLink );
      console.log( 'indexIPhone: ' , indexIPhone );
      console.log( 'indexIPad: ' , indexIPad );
      console.log( 'indexIPod: ' , indexIPod );

      if( 0 <= indexIPhone || 0 <= indexIPod || 0 <= indexIPad ) {
        handleMobileDetected( iOSLink );
      }
    });



  </script>

</html>
